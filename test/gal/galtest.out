#setvals;dir1=B;dir2=-1.0;~a=0;~b=1;~c=4;~d=5;mode=1;c1=4096;c2=4096;p1=1;p2=1
mxam=6.0;mxfq=100;hmfrq=11;fifrq=5;cycles=10;atzero=5;offi=0.0;ishome=false
true=1;false=0;r1=0.0;r2=0.0;ofst1=0.0;ofst2=0.0;m1f=0;m2f=0;enc1=0;enc2=0
tpc=0;maxm=0;minm=0;prd=10
st_time=TIME
cu_time=TIME;left=0;right=0
EN
#test2;maxm=0;prd=10
maxm=0;prd=10
EN
#test3
IF(((r1+r2)<>0)|(^a>0));^b=^a*r1/(r1+r2)*p1*c1/360;^c=^a*r2/(r1+r2)*p2*c2/360
ELSE;^b=0;^c=0;ENDIF
EN
#calcenc;IF((r1+r2)<>0);^b=^a*r1/(r1+r2)*p1*c1/360;^c=^a*r2/(r1+r2)*p2*c2/360
ELSE;^b=0;^c=0;ENDIF
EN
#shift;IF(^a<>0);IP~a=^a;ENDIF
IF(^b<>0);IP~b=^b;ENDIF
EN
#rotate;JS#calcenc(^a,&m1f,&m2f);m1f=m1f*dir1;m2f=m2f*dir2
enc1=@INT[m1f-ofst1];enc2=@INT[m2f-ofst2];ofst1=ofst1+enc1;ofst2=ofst2+enc2
JS#shift(enc1,enc2)
EN
#mode;IF(mode=0)
r1=1.0;r2=4.0;ELSE
IF(~a=0);GA~b=A;ENDIF
IF(~a=1);GA~b=B;ENDIF
IF(~a=2);GA~b=C;ENDIF
IF(~a=3);GA~b=D;ENDIF
IF(~a=4);GA~b=E;ENDIF
IF(~a=5);GA~b=F;ENDIF
IF(~a=6);GA~b=G;ENDIF
IF(~a=7);GA~b=H;ENDIF
GR~b=(p2/p1)
r1=0.0;r2=1.0;ENDIF
EN
